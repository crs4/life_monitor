{% extends 'auth/base.j2' %}
{% block body %}
<h1>LifeMonitor</h1>
{% if current_user.is_authenticated %}
  <p>You are logged in as <strong>{{ current_user.username }}</strong></p>
  <ul>
    <li>
      You{% if not current_user.has_password %} do not{% endif %} have a password set for your account.
      {% if not current_user.has_password %}
        <a href="{{ url_for("auth.set_password") }}">Set a password</a>
      {% endif %}
    </li>
    {% for p in providers %}
    <li>
      {% if p.name in current_user.oauth_identity %}
        Your user ID on <strong>{{p.name.capitalize()}}</strong> is: <strong>{{ current_user.oauth_identity[p.name].provider_user_id }}</strong>
      {% else %}
        You have not linked a <strong>{{p.name.capitalize()}}</strong> account.
        <a href="/oauth2/login/{{p.name}}">Link <strong>{{p.name.capitalize()}}</strong> account</a>
      {% endif %}
    </li>
    {% endfor %}

    
  </ul>
  <a href="{{ url_for("auth.logout") }}">Log out</a>
{% else %}
  You are not logged in.
  <a href="{{ url_for("auth.login") }}">Log in</a>
{% endif %}
{% endblock %}
